<article class="card is-horizontal">

  <div class="card-image has-ribbon">
    <div class="ribbon is-primary">
      {{ range first 1 (.GetTerms "categories") }}
        <a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
      {{ end }}
    </div>
    <!-- // HACK: Is this right? -->
    <figure class="image is-2by3">
      <a href="{{ .Permalink }}">
        {{- range first 1 (.Resources.ByType "image") -}}
          {{- $img := .Fill "320x480" | images.Filter (images.Sepia "100") -}}
            <img src="{{ $img.RelPermalink }}" alt="{{ $.Title }}">
        {{- end -}}
      </a>
      {{- with .Params.images -}}
        {{ range first 1 . }}<figcaption>Byline: {{ .byline | safeHTML }}</figcaption>{{ end }}
      {{- end -}}
    </figure>
  </div>

  <div class="card-content">
    <div class="card-content-wrapper">
      <div class="media-content">
        <a class="title is-4" href="{{ .RelPermalink }}"><h2>{{ .Title }}</h2></a>

        <span class="heading">
          <time datetime="{{ .PublishDate.Format "2006-01-02T15:04:05Z07:00" }}">
            {{ .PublishDate.Day }}. {{ index $.Site.Data.demonths (printf "%d" .PublishDate.Month) }} {{ .PublishDate.Year }}
          </time>
        
          <time datetime="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
            (Updated {{ .Lastmod.Day }}. {{ index $.Site.Data.demonths (printf "%d" .Lastmod.Month) }} {{ .Lastmod.Year }})
          </time>
        </span>

        <span class="heading author">
          {{ range (.GetTerms "authors") }}
            <figure class="image is-48x48">
              <a href="{{ .Permalink }}">
                {{- range first 1 (.Resources.ByType "image") -}}
                  {{- $img := .Fill "48x48" | images.Filter images.Grayscale -}}
                  <img class="is-rounded" src="{{ $img.RelPermalink }}" alt="{{ $.Title }}">
                {{- end -}}
              </a>
            </figure>
            <a href="{{ .Permalink }}">{{ .Title }}</a>
          {{ end }}
        </span>
      </div>
  
      <div class="content">
        {{ if (eq .Params.weight 1) }}
          {{ .Content | truncate 700 " [...]" }}
        {{ else }}
          {{ .Summary | truncate 280 " [...]" }}
        {{ end }}
        
        <a href="{{ .RelPermalink }}">{{ i18n "readMore" }}</a>

        {{ range (.GetTerms "tags") }}
          <a href="{{ .RelPermalink }}" class="hashtags">#{{ .LinkTitle }}</a>
        {{ end }}
      </div>
    
      <footer class="card-footer">
        <span class="card-footer-item">{{ .ReadingTime }} {{ i18n "minutesRead" }}</span>
        <span class="card-footer-item">{{ .WordCount }} {{ i18n "words" }}</span>
      </footer>
    </div>
  </div>
</article>