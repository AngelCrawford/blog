<article class="card {{ if .Resources }}is-horizontal{{ end }}"> 
  <div class="ribbon is-primary">
    {{ range first 1 (.GetTerms "categories") }}
      <a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
    {{ end }}
  </div>

  {{ if .Resources }}
    <div class="card-image has-ribbon">
      <!-- // HACK: Is this right? -->
      <figure class="image is-2by3">
        <a href="{{ .Permalink }}">
          {{- range first 1 (.Resources.ByType "image") -}}
            {{- $img := .Fill "320x480" | images.Filter (images.Sepia "100") -}}
              <img src="{{ $img.RelPermalink }}" alt="{{ $.Title }}">
          {{- end -}}
        </a>
        {{- with .Params.images -}}
          {{ range first 1 . }}<figcaption>Byline: {{ .byline | safeHTML }}</figcaption>{{ end }}
        {{- end -}}
      </figure>
    </div>
  {{ end }}

  <div class="card-content">
    <div class="card-content-wrapper">
      <div class="media-content">
        <a class="title is-4" href="{{ .RelPermalink }}"><h2>{{ .Title }}</h2></a>

        <span class="heading">
          <time datetime="{{ .PublishDate.Format "2006-01-02T15:04:05Z07:00" }}">
            {{ .PublishDate.Day }}. {{ index $.Site.Data.demonths (printf "%d" .PublishDate.Month) }} {{ .PublishDate.Year }}
          </time>
        
          <time datetime="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
            (Updated {{ .Lastmod.Day }}. {{ index $.Site.Data.demonths (printf "%d" .Lastmod.Month) }} {{ .Lastmod.Year }})
          </time>
        </span>

        <div class="heading author">
          {{ range (.GetTerms "authors") }}
            <figure class="image is-48x48">
              <a href="{{ .Permalink }}">
                {{- range first 1 (.Resources.ByType "image") -}}
                  {{- $img := .Fill "48x48" | images.Filter images.Grayscale -}}
                  <img class="is-rounded" src="{{ $img.RelPermalink }}" alt="{{ $.Title }}">
                {{- end -}}
              </a>
            </figure>
            <a href="{{ .Permalink }}">{{ .Title }}</a>
          {{ end }}
          </div>
      </div>
  
      <div class="content">
        {{- if .Params.rating -}}
          <div class="rating">{{ partial "rating" . }} {{ .Params.rating }}</div>
        {{- end -}}

        {{ if or (eq .Params.weight 1) (not .Resources) }}
          <!-- // FIXME: Wenn ich Content hier verwende, dann wird "summary" im Frontend nicht benutzt -->
          {{ if .Params.summary }}
            {{ .Summary | truncate 700 " [...]" }}
          {{ else }}
            {{ .Content | truncate 700 " [...]" | markdownify }}
          {{ end }}
        {{ else }}
          {{ .Summary | truncate 280 " [...]" }}
        {{ end }}
        
        <a href="{{ .RelPermalink }}">{{ i18n "readMore" }}</a>

      </div>
    
      <footer class="card-footer">
        <span class="card-footer-item">{{ .ReadingTime }} {{ i18n "minutesRead" }}</span>
        {{- if (.GetTerms "tags") -}}
          <span class="card-footer-item">
            {{- range (.GetTerms "tags") -}}
              <a href="{{ .RelPermalink }}" class="hashtags">#{{ .LinkTitle }}</a>&nbsp;
            {{- end -}}
          </span>
        {{- end -}}
      </footer>
    </div>
  </div>
</article>