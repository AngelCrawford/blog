<!-- Design is in the 09-archive.scss -->
<div class="widget-archive box">
  <p class="title is-4">From the Archive</p>

  {{ if not (eq .RelPermalink "/archive/") }}

    {{ range where .Site.Pages "Section" "articles" }}
      {{ range first 1 (.Pages.GroupByDate "2006") }}

        {{ $.Scratch.Set "yearIndexArchive" .Key }}

        <div class="columns is-vcentered">
          <div class="column year">
            {{ .Key }}
          </div>

          <div class="column">
            <ul>
              {{ range (.Pages.GroupByDate "January") }}
                {{ $list := .Pages }}
                {{ $len := (len $list) }}
                <li>
                  <span class="month-name"><a href='{{ $.Site.Params.baseurl }}/archive/#{{ .Key }}-{{ $.Scratch.Get "yearIndexArchive" }}'>{{ .Key }}</a></span>
                  <span class="month-number">{{ $len }}</span>
                </li>
              {{ end }}
            </ul>
          </div>
        </div>
      
      {{ end }}
      {{ $.Scratch.Delete "yearIndexArchive" }}
    {{ end }}
    
  {{ else }}

    {{ range where .Site.Pages "Section" "articles" }}
      {{ range (.Pages.GroupByDate "2006") }}

        {{ $.Scratch.Set "yearIndexArchive" .Key }}

        <div class="columns is-vcentered">
          <div class="column year">
            {{ .Key }}
          </div>

          <div class="column">
            <ul>
              {{ range (.Pages.GroupByDate "January") }}
                {{ $list := .Pages }}
                {{ $len := (len $list) }}
                <li>
                  <span class="month-name"><a href='{{ $.Site.Params.baseurl }}/archive/#{{ .Key }}-{{ $.Scratch.Get "yearIndexArchive" }}'>{{ .Key }}</a></span>
                  <span class="month-number">{{ $len }}</span>
                </li>
              {{ end }}
            </ul>
          </div>
        </div>
      
      {{ end }}
      {{ $.Scratch.Delete "yearIndexArchive" }}
    {{ end }}

  {{ end }}


  {{ if not (eq .RelPermalink "/archive/") }}
    <a href="/archive" class="button is-primary">
      <svg class='remix'>
        <use xlink:href="/fonts/remixicon/remixicon.symbol.svg#bookmark-line"></use>
      </svg>
      Archive
    </a>
  {{ end }}
</div>